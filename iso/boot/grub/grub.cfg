### ===============================
### Core Boot Settings
### ===============================

set default=0
set timeout=5
set timeout_style=menu

### ===============================
### Load Graphics + Input Modules
### ===============================

if loadfont /boot/grub/fonts/unicode.pf2; then
    insmod gfxterm
    insmod all_video
    insmod vbe
    insmod vga
fi

terminal_output gfxterm
terminal_input console mouse

### ===============================
### Graphics Configuration
### ===============================

# Prefer high resolutions, fall back safely
set gfxmode=1920x1080,1600x900,1366x768,1280x720,1024x768,auto
set gfxpayload=keep

### ===============================
### Menu Appearance (Text Only)
### ===============================

set menu_color_normal=light-gray/black
set menu_color_highlight=black/light-cyan

set color_normal=light-gray/black
set color_highlight=black/light-cyan

set quiet_boot=true

### ===============================
### Keyboard + Mouse Enhancements
### ===============================

insmod mouse
insmod keylayouts
keymap /boot/grub/keymaps/us.gkb

### ===============================
### Menu Entries
### ===============================

menuentry "Forest OS (Multiboot2)" --class os {
    echo "Loading Forest OS with Multiboot2..."
    multiboot2 /boot/kernel.bin
    module2 /boot/initrd.tar
    boot
}

menuentry "Forest OS (Multiboot1)" --class os {
    echo "Loading Forest OS with Multiboot1..."
    multiboot /boot/kernel.bin
    module /boot/initrd.tar
    boot
}

menuentry "Forest OS (Safe Mode)" --class os {
    echo "Loading Forest OS in safe mode..."
    multiboot2 /boot/kernel.bin safe
    module2 /boot/initrd.tar
    boot
}

menuentry "Reboot System" {
    reboot
}

menuentry "Power Off" {
    halt
}
